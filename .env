# Meeting Room Booking System - Environment Configuration
# Copy this file to .env and configure for your environment
# WARNING: Never commit .env file to version control!

#===============================================================================
# APPLICATION SETTINGS
#===============================================================================

# Application environment: development, staging, production
APP_ENV=production

# Debug mode: Enable detailed error messages (disable in production)
YII_DEBUG=false

# Application name (displayed in UI and emails)
APP_NAME="Meeting Room Booking System"

# Application timezone
APP_TIMEZONE=Asia/Bangkok

# Default language/locale
APP_LANGUAGE=th

# Base URLs for different modules (without trailing slash)
FRONTEND_URL=https://www.mrb.test/frontend
BACKEND_URL=https://www.mrb.test/backend
API_URL=https://api.mrb.test

# Cookie validation key (generate unique 32+ char string)
# Generate with: php -r "echo base64_encode(random_bytes(32));"
COOKIE_VALIDATION_KEY=change-this-to-a-secure-random-string

#===============================================================================
# DATABASE SETTINGS
#===============================================================================

# MySQL/MariaDB connection
DB_HOST=mysql
DB_PORT=3306
DB_NAME=meeting_room_booking
# DB_USER=booking_app
# DB_PASS=your-secure-database-password
DB_USER=root
DB_PASS=

# Database charset (utf8mb4 for full Unicode support)
DB_CHARSET=utf8mb4

# Additional database users (for migrations and reporting)
DB_MIGRATE_USER=booking_migrate
DB_MIGRATE_PASS=your-migration-password
DB_READONLY_USER=booking_readonly
DB_READONLY_PASS=your-readonly-password

# Connection pool settings
DB_ENABLE_SCHEMA_CACHE=true
DB_SCHEMA_CACHE_DURATION=3600

#===============================================================================
# REDIS SETTINGS
#===============================================================================

# Redis server connection
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DATABASE=0

# Redis databases for different purposes
REDIS_SESSION_DB=1
REDIS_CACHE_DB=2
REDIS_QUEUE_DB=3

# Cache settings
CACHE_DEFAULT_DURATION=3600
CACHE_KEY_PREFIX=booking_

#===============================================================================
# SESSION SETTINGS
#===============================================================================

# Session handler: php, db, redis
SESSION_HANDLER=redis

# Session timeout in seconds (2 hours default)
SESSION_TIMEOUT=7200

# Session cookie name
SESSION_COOKIE_NAME=MRBOOKING_SESSID

# Secure cookie (enable for HTTPS)
SESSION_COOKIE_SECURE=true

#===============================================================================
# EMAIL SETTINGS
#===============================================================================

# Mail transport: smtp, sendmail, file (for development)
MAIL_TRANSPORT=smtp

# SMTP server settings
MAIL_HOST=smtp.example.com
MAIL_PORT=587
MAIL_USERNAME=booking@example.com
MAIL_PASSWORD=your-email-password
MAIL_ENCRYPTION=tls

# Sender information
MAIL_FROM_EMAIL=booking@example.com
MAIL_FROM_NAME="Meeting Room Booking"

# Admin notification email
MAIL_ADMIN_EMAIL=dune2020@pi.ac.th

# File transport (for development - saves to runtime/mail)
MAIL_FILE_PATH=@runtime/mail

# Queue emails instead of sending immediately
MAIL_USE_QUEUE=true

#===============================================================================
# AUTHENTICATION SETTINGS
#===============================================================================

# JWT settings (for API authentication)
JWT_SECRET=your-jwt-secret-key-min-32-chars
JWT_ISSUER=meeting-room-booking
JWT_AUDIENCE=booking-api
JWT_ACCESS_TOKEN_EXPIRE=3600
JWT_REFRESH_TOKEN_EXPIRE=604800

# Password requirements
PASSWORD_MIN_LENGTH=8
PASSWORD_REQUIRE_UPPERCASE=true
PASSWORD_REQUIRE_LOWERCASE=true
PASSWORD_REQUIRE_NUMBERS=true
PASSWORD_REQUIRE_SPECIAL=false

# Login settings
LOGIN_MAX_ATTEMPTS=5
LOGIN_LOCKOUT_DURATION=900
LOGIN_REMEMBER_DURATION=2592000

#===============================================================================
# OAUTH2 PROVIDERS
#===============================================================================

# Google OAuth2
GOOGLE_CLIENT_ID=your-google-client-id.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=your-google-client-secret
GOOGLE_REDIRECT_URI=${FRONTEND_URL}/auth/google/callback
GOOGLE_ENABLED=false

# Microsoft Azure AD OAuth2
MICROSOFT_CLIENT_ID=your-microsoft-client-id
MICROSOFT_CLIENT_SECRET=your-microsoft-client-secret
MICROSOFT_TENANT_ID=common
MICROSOFT_REDIRECT_URI=${FRONTEND_URL}/auth/microsoft/callback
MICROSOFT_ENABLED=false

# ThaiD (Thailand Digital ID)
THAID_CLIENT_ID=your-thaid-client-id
THAID_CLIENT_SECRET=your-thaid-client-secret
THAID_REDIRECT_URI=${FRONTEND_URL}/auth/thaid/callback
THAID_API_URL=https://api.thaid.dga.or.th
THAID_ENABLED=false

#===============================================================================
# FILE STORAGE SETTINGS
#===============================================================================

# Storage driver: local, s3
STORAGE_DRIVER=local

# Local storage path (relative to application root)
STORAGE_LOCAL_PATH=@webroot/uploads

# AWS S3 storage
STORAGE_S3_KEY=your-aws-access-key
STORAGE_S3_SECRET=your-aws-secret-key
STORAGE_S3_REGION=ap-southeast-1
STORAGE_S3_BUCKET=your-bucket-name
STORAGE_S3_ENDPOINT=

# Upload limits
UPLOAD_MAX_SIZE=52428800
UPLOAD_ALLOWED_EXTENSIONS=jpg,jpeg,png,gif,pdf,doc,docx,xls,xlsx,ppt,pptx

#===============================================================================
# BOOKING SETTINGS
#===============================================================================

# Default booking settings
BOOKING_MIN_DURATION=30
BOOKING_MAX_DURATION=480
BOOKING_MAX_ADVANCE_DAYS=90
BOOKING_MIN_ADVANCE_HOURS=1
BOOKING_WORKING_HOURS_START=08:00
BOOKING_WORKING_HOURS_END=20:00
BOOKING_ALLOW_WEEKENDS=false

# Auto-approval settings
BOOKING_AUTO_APPROVE=false
BOOKING_AUTO_APPROVE_ROLES=

# Cancellation settings
BOOKING_CANCEL_BEFORE_HOURS=24
BOOKING_ALLOW_LATE_CANCEL=false

# Reminder settings
BOOKING_REMINDER_BEFORE=60,15
BOOKING_REMINDER_EMAIL=true
BOOKING_REMINDER_NOTIFICATION=true

# Auto-complete past bookings
BOOKING_AUTO_COMPLETE_ENABLED=true
BOOKING_AUTO_COMPLETE_AFTER_HOURS=1

# Auto-cancel pending bookings
BOOKING_AUTO_CANCEL_ENABLED=true
BOOKING_AUTO_CANCEL_AFTER_HOURS=48

#===============================================================================
# NOTIFICATION SETTINGS
#===============================================================================

# Enable notification channels
NOTIFICATION_EMAIL_ENABLED=true
NOTIFICATION_PUSH_ENABLED=false
NOTIFICATION_SMS_ENABLED=false

# Push notification provider (firebase, onesignal)
PUSH_PROVIDER=firebase

# Firebase Cloud Messaging
FIREBASE_PROJECT_ID=your-firebase-project
FIREBASE_SERVER_KEY=your-firebase-server-key

# OneSignal
ONESIGNAL_APP_ID=your-onesignal-app-id
ONESIGNAL_REST_API_KEY=your-onesignal-api-key

# SMS Provider (optional)
SMS_PROVIDER=twilio
TWILIO_SID=your-twilio-sid
TWILIO_TOKEN=your-twilio-token
TWILIO_FROM=+66XXXXXXXX

#===============================================================================
# SECURITY SETTINGS
#===============================================================================

# CORS allowed origins (comma-separated)
CORS_ALLOWED_ORIGINS=${FRONTEND_URL},${BACKEND_URL}

# Rate limiting (requests per minute)
RATE_LIMIT_API=60
RATE_LIMIT_LOGIN=10
RATE_LIMIT_REGISTER=5

# CSRF settings
CSRF_ENABLED=true
CSRF_COOKIE_NAME=_csrf

# Security headers
SECURITY_HSTS_ENABLED=true
SECURITY_HSTS_MAX_AGE=31536000

# Encryption key for sensitive data
ENCRYPTION_KEY=your-32-char-encryption-key-here

#===============================================================================
# LOGGING SETTINGS
#===============================================================================

# Log level: error, warning, info, debug
LOG_LEVEL=warning

# Log targets: file, db, email
LOG_TARGETS=file

# Log file path
LOG_FILE_PATH=@runtime/logs/app.log

# Log rotation (max file size in bytes)
LOG_MAX_FILE_SIZE=10485760
LOG_MAX_LOG_FILES=5

# Email alerts for errors
LOG_EMAIL_ALERT=true
LOG_EMAIL_ALERT_TO=${MAIL_ADMIN_EMAIL}

#===============================================================================
# MONITORING & ANALYTICS
#===============================================================================

# Health check endpoint
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_TOKEN=your-health-check-token

# Application metrics
METRICS_ENABLED=false
METRICS_ENDPOINT=/metrics

# Google Analytics
GA_TRACKING_ID=

# Sentry error tracking
SENTRY_DSN=
SENTRY_ENVIRONMENT=${APP_ENV}

#===============================================================================
# QUEUE SETTINGS
#===============================================================================

# Queue driver: db, redis, sync
QUEUE_DRIVER=redis

# Queue channels
QUEUE_DEFAULT_CHANNEL=default
QUEUE_EMAIL_CHANNEL=email
QUEUE_NOTIFICATION_CHANNEL=notification

# Worker settings
QUEUE_WORKER_TIMEOUT=60
QUEUE_WORKER_MEMORY=128
QUEUE_WORKER_MAX_JOBS=1000

#===============================================================================
# DEVELOPMENT SETTINGS
#===============================================================================

# Debug toolbar (development only)
DEBUG_TOOLBAR_ENABLED=false

# Debug panel allowed IPs (comma-separated)
DEBUG_ALLOWED_IPS=127.0.0.1,::1

# Gii code generator (development only)
GII_ENABLED=false
GII_ALLOWED_IPS=127.0.0.1,::1

# Faker for seeding (development only)
FAKER_LOCALE=th_TH

#===============================================================================
# DOCKER SETTINGS
#===============================================================================

# Docker network
DOCKER_NETWORK_SUBNET=172.28.0.0/16

# Container resource limits
PHP_MEMORY_LIMIT=512M
PHP_MAX_EXECUTION_TIME=300
MYSQL_MAX_CONNECTIONS=300

# Development profile services
DEV_PHPMYADMIN_PORT=8080
DEV_MAILHOG_SMTP_PORT=1025
DEV_MAILHOG_WEB_PORT=8025
DEV_REDIS_COMMANDER_PORT=8081

#===============================================================================
# EXTERNAL INTEGRATIONS
#===============================================================================

# Calendar integration
CALENDAR_GOOGLE_ENABLED=false
CALENDAR_OUTLOOK_ENABLED=false

# LDAP/Active Directory
LDAP_ENABLED=false
LDAP_HOST=ldap.example.com
LDAP_PORT=389
LDAP_BASE_DN=dc=example,dc=com
LDAP_ADMIN_DN=cn=admin,dc=example,dc=com
LDAP_ADMIN_PASSWORD=
LDAP_USER_FILTER=(uid={username})

# Single Sign-On (SSO)
SSO_ENABLED=false
SSO_PROVIDER=
SSO_METADATA_URL=

#===============================================================================
# ORGANIZATION SPECIFIC SETTINGS
#===============================================================================

# Organization settings
ORG_NAME="BiZCO"
ORG_NAME_EN="BiZCO Organization"
ORG_LOGO_URL=/images/logo.png
ORG_FAVICON_URL=/images/favicon.ico

# Footer information
FOOTER_ADDRESS="BIzCO นนทบุรี 11000"
FOOTER_PHONE="02-590-1000"
FOOTER_EMAIL="info@bizco.co.th"
FOOTER_WEBSITE="https://www.bizco.co.th"

# Ministry branding
MINISTRY_NAME="กระทรวงสาธารณสุข"
MINISTRY_LOGO_URL=/images/moph-logo.png
