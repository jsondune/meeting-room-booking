; Meeting Room Booking System - OPcache Configuration
; Optimized for Yii2 Framework production

[opcache]
; Enable OPcache
opcache.enable = 1
opcache.enable_cli = 0

; Memory settings
opcache.memory_consumption = 256
opcache.interned_strings_buffer = 32
opcache.max_accelerated_files = 20000

; Cache invalidation
; In production, set to 0 for best performance
; In development, set to 1
opcache.validate_timestamps = 0
opcache.revalidate_freq = 0
opcache.revalidate_path = 0

; File handling
opcache.use_cwd = 1
opcache.max_file_size = 0
opcache.file_update_protection = 2
opcache.blacklist_filename = ""

; Optimization
opcache.optimization_level = 0x7FFEBFFF
opcache.dups_fix = 0
opcache.fast_shutdown = 1
opcache.consistency_checks = 0

; Error handling
opcache.error_log = /var/log/php/opcache.log
opcache.log_verbosity_level = 1

; Caching and preloading
opcache.max_wasted_percentage = 10
opcache.force_restart_timeout = 180
opcache.save_comments = 1
opcache.load_comments = 1

; JIT (PHP 8.0+)
; tracing JIT for best performance
opcache.jit = tracing
opcache.jit_buffer_size = 100M
opcache.jit_debug = 0
opcache.jit_bisect_limit = 0
opcache.jit_max_root_traces = 1024
opcache.jit_max_side_traces = 128
opcache.jit_max_exit_counters = 8192
opcache.jit_hot_loop = 64
opcache.jit_hot_func = 127
opcache.jit_hot_return = 8
opcache.jit_hot_side_exit = 8

; File cache (optional, for faster restarts)
; opcache.file_cache = /tmp/opcache
; opcache.file_cache_only = 0
; opcache.file_cache_consistency_checks = 1
; opcache.file_cache_fallback = 1

; Preloading (PHP 7.4+)
; Uncomment and set path to preload script for even faster performance
; opcache.preload = /app/config/preload.php
; opcache.preload_user = app

; Huge pages (requires system configuration)
; opcache.huge_code_pages = 1

; Lock file for shared memory
opcache.lockfile_path = /tmp

; Statistics
; For monitoring (disable in production for slight performance gain)
; opcache.record_warnings = 0
